<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Food Log - Fitness Feed</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="food-log-page">
  <div class="app-container">
    <!-- Header -->
    <div class="food-log-page-header">
      <a href="index.html" class="back-button">
        <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </a>
      <div class="food-log-page-title">Food Log</div>
      <button class="food-log-camera-btn" id="foodCameraBtn" aria-label="Log food with camera" style="margin-left: auto;">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 15.2c-1.8 0-3.2-1.4-3.2-3.2s1.4-3.2 3.2-3.2 3.2 1.4 3.2 3.2-1.4 3.2-3.2 3.2zm8-10.2h-3.2l-1.9-2H9.1L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"/></svg>
      </button>
    </div>

    <!-- Food Log Entries -->
    <div class="food-log-entries" id="foodLogEntries">
      <!-- Entries will be populated by JavaScript -->
    </div>

    <!-- Empty State -->
    <div class="food-log-empty" id="foodLogEmpty" style="display: none;">
      <svg class="food-log-empty-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 15.2c-1.8 0-3.2-1.4-3.2-3.2s1.4-3.2 3.2-3.2 3.2 1.4 3.2 3.2-1.4 3.2-3.2 3.2zm8-10.2h-3.2l-1.9-2H9.1L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"/>
      </svg>
      <div class="food-log-empty-title">No food logged yet</div>
      <div class="food-log-empty-text">Tap the camera button to log your first meal</div>
    </div>

    <!-- Add Food Button (Fixed at bottom) -->
    <button class="food-log-add-btn" id="addFoodBtn">
      <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
        <path d="M12 15.2c-1.8 0-3.2-1.4-3.2-3.2s1.4-3.2 3.2-3.2 3.2 1.4 3.2 3.2-1.4 3.2-3.2 3.2zm8-10.2h-3.2l-1.9-2H9.1L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"/>
      </svg>
      Log Food
    </button>
  </div>

  <!-- Food Camera Modal -->
  <div class="modal-overlay camera-overlay" id="cameraModal">
    <!-- Camera View -->
    <div class="camera-view active" id="cameraView">
      <button class="camera-cancel-link" id="cameraCancelTop">Cancel</button>
      <div class="camera-viewfinder">
        <video id="cameraVideo" autoplay playsinline></video>
        <canvas id="cameraCanvas" style="display: none;"></canvas>
      </div>
      <div class="camera-controls">
        <button class="camera-capture-btn" id="captureBtn">
          <div class="capture-btn-inner"></div>
        </button>
      </div>
    </div>

    <!-- Rating View -->
    <div class="camera-view" id="ratingView">
      <button class="camera-cancel-link" id="ratingCancelTop">Cancel</button>
      <div class="camera-photo-preview">
        <img id="capturedPhoto" src="" alt="Captured food">
      </div>
      <div class="rating-buttons">
        <button class="rating-btn" id="ratingBad" data-rating="bad">
          <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"/>
          </svg>
        </button>
        <button class="rating-btn" id="ratingGood" data-rating="good">
          <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
            <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
          </svg>
        </button>
      </div>
      <button class="camera-cancel-btn-bottom" id="ratingCancelBottom">
        <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
        Cancel
      </button>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    // Initialize food camera
    initFoodCamera();

    // Also allow the header camera button and add button to open camera
    const addFoodBtn = document.getElementById('addFoodBtn');
    if (addFoodBtn) {
      addFoodBtn.addEventListener('click', openCameraModal);
    }

    // Render the food log entries
    renderFoodLogPage();
  </script>
</body>
</html>
